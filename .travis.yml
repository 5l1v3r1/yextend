sudo: required
language: cpp
compiler:
- gcc
env:
  global:
  - secure: blElWPbZkN5BUYkUyNctjeV5NA2f90DyNJtOWYeleOCaVg0n0VFIOoO677mDhSLX8i9FAChUTd4x2Q/uQlu0PWXkmqX+Hs+t+V5Pr6GLADo15gHeOYu/Ebezvz3M5JG4W6De3dcVbNsU0HZxGWfZGeFHVof0zUO8J1Q5dbzJxRwZABkAtmVNw10tbiSUI0H3lrU3/GhRvHVZJdtXXyMU2kM8R/KgaLzek35CG6tEKKMThvRiM3wCDOcBO2uPZSrjFGhrNyzsVXlEfupsFwadns6khpGqxcX+Gfj9OdimLH8AYC9vchdHxBkPiaxRjf6gG3oqmidmXxpboLJrAjuwNh+BuPYIZUHormPjb+IS8JU1KhqEhXi722/RJtBH7Q/ysyn+HPfEbT4GvkR4Hz5aGHU3je8yWxcHE/96/zmSywpg+Pvcp3ifIRTXymEbEKoqEBdInuea/9QQEi8d94sbjVzDSf4Cdx3JTbOwBQGWaVF/Wz8PqIKSvGJixUPDjKBVb4QdsaY2YDFWDwQsDfvaJVXUf8YpBK1i766KLcbwq6xNypeJdtBTbs/I4qs+DOVzTLWTwErUkQ7m47ql9cNgcqmRl2Mp5t1ACRVHvUv2v39tITEE44JEYmRse9OoOk3yUGbOnodDmiPfmjXgZ1VpL5eV+uo6u0SJBap1zcT2VWk=
matrix:
  include:
  - os: linux
    addons:
      apt:
        sources:
        - ubuntu-toolchain-r-test
        packages:
        - g++-7
    env:
    - MATRIX_EVAL="CC=gcc-7 && CXX=g++-7"
before_install:
- eval "${MATRIX_EVAL}"
- sudo apt-get install libssl-dev
- sudo apt-get install zlib1g-dev
- sudo apt-get install libbz2-dev
- sudo apt-get install libarchive-dev
- sudo apt-get install libpcre3-dev
- sudo apt-get install uuid-dev
- sudo apt-get install poppler-utils
- sudo apt-get install python-nose
- echo -n | openssl s_client -connect scan.coverity.com:443 | sed -ne '/-BEGIN CERTIFICATE-/,/-END
  CERTIFICATE-/p' | sudo tee -a /etc/ssl/certs/ca-
install:
- wget https://github.com/VirusTotal/yara/archive/v3.7.0.tar.gz
- tar -xzvf v3.7.0.tar.gz
- cd yara-3.7.0
- "./bootstrap.sh"
- "./configure"
- make
- sudo make install
- cd ../
addons:
  coverity_scan:
    project:
      name: BayshoreNetworks/yextend
      description: Build submitted via Travis CI
    notification_email: andres@neurofuzzsecurity.com
    build_command_prepend: make clean
    build_command: "./build.sh"
    branch_pattern: coverity_scan
script: if [ "${COVERITY_SCAN_BRANCH}" != 1 ]; then ./build.sh ; fi
